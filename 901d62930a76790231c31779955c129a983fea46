{
  "comments": [
    {
      "key": {
        "uuid": "560bbcc4_cc104840",
        "filename": "sensors/AlsCorrection.cpp",
        "patchSetId": 2
      },
      "lineNbr": 251,
      "author": {
        "id": 10067
      },
      "writtenOn": "2021-09-05T16:49:24Z",
      "side": 1,
      "message": "corr \u003d std::max(0.0, corr * conf.rgbw_lux_postmul[i]);",
      "range": {
        "startLine": 248,
        "startChar": 12,
        "endLine": 251,
        "endChar": 13
      },
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d60f35c7_fc8d9e6f",
        "filename": "sensors/AlsCorrection.cpp",
        "patchSetId": 2
      },
      "lineNbr": 251,
      "author": {
        "id": 13106
      },
      "writtenOn": "2021-09-05T17:26:38Z",
      "side": 1,
      "message": "Good point.",
      "parentUuid": "560bbcc4_cc104840",
      "range": {
        "startLine": 248,
        "startChar": 12,
        "endLine": 251,
        "endChar": 13
      },
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7932fa3f_9e4ed122",
        "filename": "sensors/AlsCorrection.cpp",
        "patchSetId": 2
      },
      "lineNbr": 260,
      "author": {
        "id": 29356
      },
      "writtenOn": "2021-09-05T18:17:33Z",
      "side": 1,
      "message": "...and apply gamma again here?",
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ecd88a2_9ba672b0",
        "filename": "sensors/AlsCorrection.cpp",
        "patchSetId": 2
      },
      "lineNbr": 260,
      "author": {
        "id": 13106
      },
      "writtenOn": "2021-09-05T18:46:32Z",
      "side": 1,
      "message": "Yes, pow(pixel, 2.2) is how much light it actually emits. I\u0027ve already verified this against sensor readings on real hardware. This is also how OP does it. Note that the actual estimation is made with the polynomials just above, this is only a lower bound to clamp against.",
      "parentUuid": "7932fa3f_9e4ed122",
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef28c3b1_f65c95e8",
        "filename": "sensors/HalProxy.cpp",
        "patchSetId": 2
      },
      "lineNbr": 502,
      "author": {
        "id": 10067
      },
      "writtenOn": "2021-09-05T16:49:24Z",
      "side": 1,
      "message": "is this really worth it?",
      "range": {
        "startLine": 476,
        "startChar": 0,
        "endLine": 502,
        "endChar": 5
      },
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f634109_adc7a947",
        "filename": "sensors/HalProxy.cpp",
        "patchSetId": 2
      },
      "lineNbr": 502,
      "author": {
        "id": 13106
      },
      "writtenOn": "2021-09-05T17:26:38Z",
      "side": 1,
      "message": "Probably not, it\u0027s just that calling init more than once *will* mess some things up with the way things are set up right now. That can be fixed obviously.",
      "parentUuid": "ef28c3b1_f65c95e8",
      "range": {
        "startLine": 476,
        "startChar": 0,
        "endLine": 502,
        "endChar": 5
      },
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2e5a88f_43b34794",
        "filename": "sensors/als_correction_service.cpp",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 29356
      },
      "writtenOn": "2021-09-05T18:17:33Z",
      "side": 1,
      "message": "here sums brightness in gamma space",
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0c028de_da51e0c5",
        "filename": "sensors/als_correction_service.cpp",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 29356
      },
      "writtenOn": "2021-09-05T19:01:40Z",
      "side": 1,
      "message": "I mean summing pixels in gamma space doesn\u0027t work, no matter if OP does it.",
      "parentUuid": "c2e5a88f_43b34794",
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e488a90f_20e4855d",
        "filename": "sensors/als_correction_service.cpp",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 13106
      },
      "writtenOn": "2021-09-05T19:09:03Z",
      "side": 1,
      "message": "Yes I understand that, for now the focus is to make it more like OP does it and then we can improve things from there. OP uses V0_SRGB, so I use V0_SRGB. I haven\u0027t reversed their averaging code yet, it\u0027s an even more monstrous beast than what we\u0027re dealing with right now.\n\nAsking SF for linear light would potentially remove a lot of complexity from this code if it works well. You\u0027d at least want to use V0_SRGB_LINEAR instead of DISPLAY_P3_LINEAR though.",
      "parentUuid": "a0c028de_da51e0c5",
      "revId": "901d62930a76790231c31779955c129a983fea46",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": true
    }
  ]
}